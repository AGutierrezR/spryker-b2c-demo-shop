<?xml version="1.0" encoding="utf-8"?>
<statemachine
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../process.xsd"
>
    <process name="reversal">
        <transitions>
            <transition happy="true" condition="PayolutionOmsConnector/ReversalIsApproved">
                <source>ready to be shipped</source>
                <target>ready for pre-authorization</target>
                <event>revert</event>
            </transition>
            <transition>
                <source>ready to be shipped</source>
                <target>payment validation failed</target>
                <event>revert</event>
            </transition>
        </transitions>
        <events>
            <event name="revert" manual="true" command="Payolution/Revert"/>
        </events>
    </process>
</statemachine>
