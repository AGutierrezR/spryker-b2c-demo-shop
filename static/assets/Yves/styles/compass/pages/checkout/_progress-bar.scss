// sprite
@include sprite-placeholders( 'checkout-progressbar/*.png' ){
  content: '';
}

.checkout-progress {
  /* colors */

  $color-idle-gradient-top: #fbfbfb;
  $color-idle-gradient-bottom: #eee;
  $color-enabled-gradient-top: #e3f6fc;
  $color-enabled-gradient-bottom: #dbebef;
  $color-active-gradient-top: #50d2f7;
  $color-active-gradient-bottom: #43afce;

  $height: 45px;

  border: 1px solid #d5d5d5;
  @include border-radius( 5px );

  background: mix( $color-idle-gradient-top, $color-idle-gradient-bottom ) inline-image( 'checkout-bar-bg-grey.png' ) repeat-x 50%;

  margin: 1em 0 0;

  height: $height + 2px;

  overflow: hidden;

  h2 {
    color: $ci-green;
    font-size: 13px;
    font-weight: normal;

    width: 18%;
    height: $height;
    line-height: $height;

    float: left;
    margin: 0;
    padding: 0 1em;

    &:before {
      @extend %checkout-progressbar-sprite-lock;

      display: inline-block;
      vertical-align: middle;

      margin-right: 1em;
      margin-top: -5px;
    }
  }

  ol {
    margin: 0 0 0 20%;
    padding: 0;
    height: $height;
    width: 70%;

    position: relative;

    counter-reset: progress-counter;

    &:before {
      position: absolute;
      right: 100%;
      top: 0;
      @extend %checkout-progressbar-sprite-grey-grey;
    }
    &:after {
      position: absolute;
      left: 100%;
      top: 0;
      margin-left: -10px;
      @extend %checkout-progressbar-sprite-grey-grey;
    }

    &.has-first-enabled:before {
      @extend %checkout-progressbar-sprite-grey-lightblue;
    }
    &.has-first-active:before {
      @extend %checkout-progressbar-sprite-grey-blue;
    }

    &.has-last-enabled:after {
      @extend %checkout-progressbar-sprite-lightblue-grey;
    }
    &.has-last-active:after {
      @extend %checkout-progressbar-sprite-blue-grey;
    }
  }

  li {
    color: $ci-gray;
    color: rgba( 0, 0, 0, .35 );

    text-shadow: 0 1px 2px #fff, 0 0 0 #999;

    font-weight: 900;
    text-transform: uppercase;

    padding: 0 2em;
    width: 33%;
    height: 100%;
    vertical-align: middle;
    font-size: 16px;

    position: relative;

    counter-increment: progress-counter;

    &:before {
      content: counter( progress-counter );
      font-size: 20px;
      text-align: center;

      line-height: $height;

      width: 90%;

      display: inline-block;
      vertical-align: middle;

      @media #{$small} {
        font-size: 32px;
        text-align: left;

        line-height: $height;

        width: 20%;
      }
    }

    &:after {
      content: '';
      position: absolute;
      top: 0;
      right: 100%;
    }

  }

  .disabled {
    + .disabled:after {
      @extend %checkout-progressbar-sprite-grey-grey;
    }
    + .enabled:after {
      @extend %checkout-progressbar-sprite-grey-lightblue;
    }
    + .active:after {
      @extend %checkout-progressbar-sprite-grey-blue;
    }
  }

  .label {
    display: none;
    @media #{$small} {
      color: $ci-gray;
      color: rgba( 0, 0, 0, .5 );
      font-size: .8em;
      text-decoration: none;

      display: inline-block;
      vertical-align: middle;
      width: 75%;
      line-height: 1.1em;

      &:link:hover{
        color: $ci-blue;
        color: transparentize( darken( $ci-blue, 15% ), .25 );
      }
    }
  }

  .enabled {
    background: mix( $color-enabled-gradient-top, $color-enabled-gradient-bottom ) inline-image( 'checkout-bar-bg-lightblue.png' ) repeat-x 50%;

    + .disabled:after {
      @extend %checkout-progressbar-sprite-lightblue-grey;
    }
    + .enabled:after {
      @extend %checkout-progressbar-sprite-lightblue-lightblue;
    }
    + .active:after {
      @extend %checkout-progressbar-sprite-lightblue-blue;
    }
  }

  .active {
    color: #fff;
    text-shadow: none;

    background: mix( $color-active-gradient-top, $color-active-gradient-bottom ) inline-image( 'checkout-bar-bg-blue.png' ) repeat-x 50%;

    .label {
      color: #fff;
    }

    + .disabled:after {
      @extend %checkout-progressbar-sprite-blue-grey;
    }
    + .enabled:after {
      @extend %checkout-progressbar-sprite-blue-lightblue;
    }
  }
}

.checkout-progress.new {
  ol {
    margin: 0;
    width: 95%;
    li {
      width: 20%;
    }

    li.step-signin {
      b{
        &:before {
          @extend %checkout-progressbar-sprite-lock;

          display: inline-block;
          vertical-align: middle;

          margin-right: 1em;
          margin-top: -5px;
        }
      }
    }
  }
}

#checkout-progressbar-invisible {
  display: none;
}