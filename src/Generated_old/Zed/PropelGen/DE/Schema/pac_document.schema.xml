<?xml version="1.0"?>
<database name="zed"
          package="vendor/spryker/zed-package/src/ProjectA/Zed/Document/Persistence/Propel"
          defaultIdMethod="native"
          defaultPhpNamingMethod="underscore"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://xsd.propelorm.org/1.6/database.xsd">

    <table name="pac_document_type" idMethod="native" phpName="PacDocumentType">
        <column name="id_document_type" required="true" type="INTEGER" autoIncrement="true" primaryKey="true" />
        <column name="name" required="true" size="255" type="VARCHAR"/>
        <column name="type" required="true" size="255" type="VARCHAR"/>
        <behavior name="timestampable"/>
        <unique>
            <unique-column name="type"/>
        </unique>
    </table>

    <table name="pac_document_render_engine" idMethod="native" phpName="PacDocumentRenderEngine">
        <column name="id_document_render_engine" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" size="255" type="VARCHAR"/>
        <behavior name="timestampable"/>
    </table>

    <table name="pac_document_template" idMethod="native" phpName="PacDocumentTemplate">
        <column name="id_document_template" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" size="255" type="VARCHAR"/>
        <column name="content" required="false" type="LONGVARCHAR"/>
        <behavior name="timestampable"/>
        <behavior name="versionable"/>
    </table>

    <table name="pac_document_configuration" idMethod="native" phpName="PacDocumentConfiguration">
        <column name="id_document_configuration" required="true" type="INTEGER" autoIncrement="true" primaryKey="true" />
        <column name="fk_document_type" type="INTEGER" required="true"/>
        <column name="fk_document_template" type="INTEGER" required="true"/>
        <column name="fk_document_render_engine" type="INTEGER" required="true"/>
        <column name="name" required="true" size="255" type="VARCHAR"/>
        <behavior name="timestampable"/>

        <foreign-key foreignTable="pac_document_type" phpName="Type" refPhpName="DocumentConfiguration">
            <reference local="fk_document_type" foreign="id_document_type"/>
        </foreign-key>

        <foreign-key foreignTable="pac_document_template" phpName="Template" refPhpName="DocumentConfiguration">
            <reference local="fk_document_template" foreign="id_document_template"/>
        </foreign-key>

        <foreign-key foreignTable="pac_document_render_engine" phpName="RenderEngine" refPhpName="DocumentConfiguration">
            <reference local="fk_document_render_engine" foreign="id_document_render_engine"/>
        </foreign-key>
    </table>

    <table name="pac_document_render_process" idMethod="native" phpName="PacDocumentRenderProcess">
        <column name="id_document_render_process" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_document" required="true" type="INTEGER"/>
        <column name="is_success" required="true" type="BOOLEAN"/>
        <behavior name="timestampable"/>

        <foreign-key foreignTable="pac_document" phpName="Document" refPhpName="DocumentRenderProcess">
            <reference local="fk_document" foreign="id_document"/>
        </foreign-key>
    </table>

    <table name="pac_document" idMethod="native" phpName="PacDocument">
        <column name="id_document" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_sales_order" required="false" type="INTEGER"/>
        <column name="fk_document_render_engine" required="true" type="INTEGER"/>
        <column name="fk_document_configuration" required="true" type="INTEGER"/>
        <column name="data" required="true" type="CLOB"/>
        <column name="template" required="false" type="LONGVARCHAR"/>
        <behavior name="timestampable"/>

        <foreign-key foreignTable="pac_sales_order" phpName="Order" refPhpName="Document">
            <reference local="fk_sales_order" foreign="id_sales_order"/>
        </foreign-key>
        <foreign-key foreignTable="pac_document_render_engine" phpName="RenderEngine" refPhpName="Document">
            <reference local="fk_document_render_engine" foreign="id_document_render_engine"/>
        </foreign-key>
        <foreign-key foreignTable="pac_document_configuration" phpName="Configuration" refPhpName="Document">
            <reference local="fk_document_configuration" foreign="id_document_configuration"/>
        </foreign-key>
    </table>
</database>
