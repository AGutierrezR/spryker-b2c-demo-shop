<?xml version="1.0"?>
<database name="zed"
          defaultIdMethod="native"
          package="vendor/spryker/zed-package/src/ProjectA/Zed/Catalog/Persistence/Propel"
          defaultPhpNamingMethod="underscore"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://xsd.propelorm.org/1.6/database.xsd">

    <table name="pac_catalog_product" idMethod="native" allowPkInsert="true" phpName="PacCatalogProduct">
        <column name="id_catalog_product" required="true" type="INTEGER" autoIncrement="true" primaryKey="true" />
        <column name="sku" type="VARCHAR" size="255" required="true" />
        <column name="is_item" type="BOOLEAN" required="true" />
        <column name="status" type="CHAR" sqlType="ENUM('new','approved','changed','deleted')" required="true" defaultValue='new' />
        <column name="variety" type="CHAR" sqlType="ENUM('Single','Config','Simple','Bundle')" required="true" />
        <column name="fk_catalog_attribute_set" type="INTEGER" required="true" />
        <column name="cache" type="LONGVARCHAR" required="false" />

        <foreign-key foreignTable="pac_catalog_attribute_set" phpName="AttributeSet" refPhpName="ProductEntity">
            <reference local="fk_catalog_attribute_set" foreign="id_catalog_attribute_set" />
        </foreign-key>
        <behavior name="timestampable" />
        <unique>
            <unique-column name="sku" />
        </unique>
    </table>

    <table name="pac_catalog_product_bundle" baseClass="\ProjectA\Zed\Catalog\Business\Model\AbstractPropelSpecificProduct" phpName="PacCatalogProductBundle">
        <column name="id_catalog_product" required="true" type="INTEGER" primaryKey="true" />
        <column name="bundle_type" type="CHAR" sqlType="ENUM('NonSplitBundle','SplitBundle')" required="true" />
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="Bundle">
            <reference local="id_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
    </table>

    <table name="pac_catalog_product_bundle_product" idMethod="native" phpName="PacCatalogProductBundleProduct" isCrossRef="true">
        <column name="id_catalog_product_bundle_product" required="true" type="INTEGER" autoIncrement="true" primaryKey="true" />
        <column name="fk_catalog_product_bundle" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />
        <foreign-key foreignTable="pac_catalog_product_bundle" phpName="BundleProductBundle" refPhpName="BundleProduct">
            <reference local="fk_catalog_product_bundle" foreign="id_catalog_product" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product" phpName="BundleProductProduct" refPhpName="BundleProduct">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>

        <unique>
            <unique-column name="fk_catalog_product_bundle" />
            <unique-column name="fk_catalog_product" />
        </unique>
    </table>

    <table name="pac_catalog_product_single" baseClass="\ProjectA\Zed\Catalog\Business\Model\AbstractPropelSpecificProduct" phpName="PacCatalogProductSingle">
        <column name="id_catalog_product" required="true" type="INTEGER" primaryKey="true" />
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="SingleEntity">
            <reference local="id_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
    </table>

    <table name="pac_catalog_product_config" baseClass="\ProjectA\Zed\Catalog\Business\Model\AbstractPropelSpecificProduct" phpName="PacCatalogProductConfig">
        <column name="id_catalog_product" required="true" type="INTEGER" primaryKey="true" />
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="ConfigEntity">
            <reference local="id_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
    </table>

    <table name="pac_catalog_product_simple" baseClass="\ProjectA\Zed\Catalog\Business\Model\AbstractPropelSpecificProduct" phpName="PacCatalogProductSimple">
        <column name="id_catalog_product" required="true" type="INTEGER" primaryKey="true" />
        <column name="fk_catalog_product_config" type="INTEGER" required="true" />

        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="SimpleEntity">
            <reference local="id_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product_config" phpName="ConfigEntity" refPhpName="SimpleEntity">
            <reference local="fk_catalog_product_config" foreign="id_catalog_product" />
        </foreign-key>

    </table>

    <table name="pac_catalog_attribute_set" idMethod="native" phpName="PacCatalogAttributeSet">
        <column name="id_catalog_attribute_set" required="true" type="INTEGER" autoIncrement="true" primaryKey="true" />

        <column name="name" type="VARCHAR" size="255" required="true" />
        <unique>
            <unique-column name="name" />
        </unique>
    </table>

    <table name="pac_catalog_attribute" idMethod="native" phpName="PacCatalogAttribute">
        <column name="id_catalog_attribute" required="true" type="INTEGER" autoIncrement="true" primaryKey="true" />

        <column name="name" type="VARCHAR" size="255" required="true" />
        <unique>
            <unique-column name="name" />
        </unique>
    </table>

    <table name="pac_catalog_group" idMethod="native" phpName="PacCatalogGroup">
        <column name="id_catalog_group" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />

        <column name="name" type="VARCHAR" size="255" required="true" />
        <unique>
            <unique-column name="name" />
        </unique>
    </table>

    <table name="pac_catalog_value_type" idMethod="native" phpName="PacCatalogValueType">
        <column name="id_catalog_value_type" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />
        <column name="fk_catalog_attribute_set" type="INTEGER" required="true" />

        <column name="variety" type="CHAR" sqlType="ENUM('Text','Integer','Boolean','OptionSingle','OptionMulti','Decimal','Timestamp')" required="true" />

        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="ValueType">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_attribute_set" phpName="AttributeSet" refPhpName="ValueType" onDelete="CASCADE">
            <reference local="fk_catalog_attribute_set" foreign="id_catalog_attribute_set" />
        </foreign-key>

        <unique>
            <unique-column name="fk_catalog_attribute" />
            <unique-column name="fk_catalog_attribute_set" />
        </unique>

    </table>

    <table name="pac_catalog_attribute_group" phpName="PacCatalogAttributeGroup" isCrossRef="true">
        <column name="id_catalog_attribute_group" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_group" type="INTEGER" required="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />

        <foreign-key foreignTable="pac_catalog_group" phpName="Group" refPhpName="AttributeGroup" onDelete="CASCADE">
            <reference local="fk_catalog_group" foreign="id_catalog_group" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="AttributeGroup">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_group" />
            <unique-column name="fk_catalog_attribute" />
        </unique>
    </table>

    <table name="pac_catalog_attribute_set_group" phpName="PacCatalogAttributeSetGroup" isCrossRef="true">
        <column name="id_catalog_attribute_set_group" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_group" type="INTEGER" required="true" />
        <column name="fk_catalog_value_type" type="INTEGER" required="true" />
        <foreign-key foreignTable="pac_catalog_group" phpName="Group" refPhpName="AttributeSetGroup" onDelete="CASCADE">
            <reference local="fk_catalog_group" foreign="id_catalog_group" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_value_type" phpName="ValueType" refPhpName="AttributeSetGroup">
            <reference local="fk_catalog_value_type" foreign="id_catalog_value_type" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_group" />
            <unique-column name="fk_catalog_value_type" />
        </unique>
    </table>

    <table name="pac_catalog_value_option" phpName="PacCatalogValueOption">
        <column name="id_catalog_value_option" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="name" type="VARCHAR" size="255" required="true" />
        <column name="fk_catalog_value_type" type="INTEGER" required="true" />
        <foreign-key foreignTable="pac_catalog_value_type" phpName="ValueType" refPhpName="Option">
            <reference local="fk_catalog_value_type" foreign="id_catalog_value_type" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_value_type" />
            <unique-column name="name" />
        </unique>
    </table>

    <table name="pac_catalog_value_option_multi" phpName="PacCatalogValueOptionMulti">
        <column name="id_catalog_value_option_multi" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_value_option" type="INTEGER" required="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />

        <foreign-key foreignTable="pac_catalog_value_option" phpName="Option" refPhpName="OptionMulti">
            <reference local="fk_catalog_value_option" foreign="id_catalog_value_option" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="OptionMulti">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="OptionMulti">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_product" />
            <unique-column name="fk_catalog_attribute" />
            <unique-column name="fk_catalog_value_option" />
        </unique>
    </table>

    <table name="pac_catalog_value_option_single" phpName="PacCatalogValueOptionSingle">
        <column name="id_catalog_value_option_single" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_value_option" type="INTEGER" required="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />

        <foreign-key foreignTable="pac_catalog_value_option" phpName="Option" refPhpName="OptionSingle">
            <reference local="fk_catalog_value_option" foreign="id_catalog_value_option" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="OptionSingle">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="OptionSingle">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_product" />
            <unique-column name="fk_catalog_attribute" />
        </unique>
    </table>

    <table name="pac_catalog_value_integer" phpName="PacCatalogValueInteger">
        <column name="id_catalog_value_integer" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />

        <column name="value" type="INTEGER" required="true" />

        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="Integer">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="Integer">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_attribute" />
            <unique-column name="fk_catalog_product" />
        </unique>
        <index>
            <index-column name="value" />
            <index-column name="fk_catalog_attribute" />
        </index>
    </table>

    <table name="pac_catalog_value_timestamp" phpName="PacCatalogValueTimestamp">
        <column name="id_catalog_value_timestamp" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />

        <column name="value" type="TIMESTAMP" required="true" />

        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="Timestamp">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="Timestamp">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_attribute" />
            <unique-column name="fk_catalog_product" />
        </unique>
        <index>
            <index-column name="value" />
            <index-column name="fk_catalog_attribute" />
        </index>
    </table>

    <table name="pac_catalog_value_decimal" phpName="PacCatalogValueDecimal">
        <column name="id_catalog_value_decimal" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />

        <column name="value" type="DECIMAL" size="15" scale="5" required="true" />

        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="Decimal">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="Decimal">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_attribute" />
            <unique-column name="fk_catalog_product" />
        </unique>
        <index>
            <index-column name="value" />
            <index-column name="fk_catalog_attribute" />
        </index>
    </table>

    <table name="pac_catalog_value_text" phpName="PacCatalogValueText">
        <column name="id_catalog_value_text" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />

        <column name="value" type="LONGVARCHAR" required="true" />

        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="Text">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="Text">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_attribute" />
            <unique-column name="fk_catalog_product" />
        </unique>
        <index>
            <index-column name="fk_catalog_attribute" />
        </index>
    </table>

    <table name="pac_catalog_value_boolean" phpName="PacCatalogValueBoolean">
        <column name="id_catalog_value_boolean" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_attribute" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />

        <column name="value" type="BOOLEAN" required="true" />

        <foreign-key foreignTable="pac_catalog_attribute" phpName="Attribute" refPhpName="Boolean">
            <reference local="fk_catalog_attribute" foreign="id_catalog_attribute" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="Boolean">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <unique>
            <unique-column name="fk_catalog_attribute" />
            <unique-column name="fk_catalog_product" />
        </unique>
        <index>
            <index-column name="value" />
            <index-column name="fk_catalog_attribute" />
        </index>
    </table>

    <table name="pac_catalog_product_category" phpName="PacCatalogProductCategory">
        <column name="id_catalog_product_category" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
        <column name="fk_catalog_product" type="INTEGER" required="true" />
        <column name="fk_category_name" type="INTEGER" required="true" />

        <foreign-key foreignTable="pac_catalog_product" phpName="Product" refPhpName="ProductCategory">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <!--<foreign-key foreignTable="pac_category_name" phpName="CategoryName" refPhpName="ProductCategory">
            <reference local="fk_category_name" foreign="id_category_name" />
        </foreign-key>-->
        <unique>
            <unique-column name="fk_catalog_product" />
            <unique-column name="fk_category_name" />
        </unique>
    </table>

    <table name="pac_catalog_option" idMethod="native" allowPkInsert="true" phpName="PacCatalogOption">
        <column name="id_catalog_option" required="true" type="INTEGER" autoIncrement="true" primaryKey="true" />
        <column name="fk_catalog_option_type" type="INTEGER" required="true" />

        <column name="identifier" type="VARCHAR" size="255" required="false" />
        <column name="name" type="VARCHAR" size="255" required="true" />
        <column name="description" type="LONGVARCHAR" required="false" />
        <column name="price" type="INTEGER" required="true" />
        <column name="tax_percentage" type="INTEGER" required="false" defaultValue="0" />

        <behavior name="timestampable" />

        <foreign-key foreignTable="pac_catalog_option_type" phpName="OptionType" refPhpName="Option">
            <reference local="fk_catalog_option_type" foreign="id_catalog_option_type" />
        </foreign-key>
    </table>

    <table name="pac_catalog_option_type" idMethod="native" allowPkInsert="true" phpName="PacCatalogOptionType">
        <column name="id_catalog_option_type" required="true" type="INTEGER" autoIncrement="true" primaryKey="true" />

        <column name="name" type="VARCHAR" size="255" required="true" />

        <behavior name="timestampable" />
    </table>

    <table name="pac_catalog_product_option" idMethod="native" allowPkInsert="true" isCrossRef="true" phpName="PacCatalogProductOption">
        <column name="fk_catalog_product" required="true" type="INTEGER" primaryKey="true" />
        <column name="fk_catalog_option" required="true" type="INTEGER" primaryKey="true" />

        <foreign-key foreignTable="pac_catalog_product" phpName="ProductEntity" refPhpName="ProductOption">
            <reference local="fk_catalog_product" foreign="id_catalog_product" />
        </foreign-key>
        <foreign-key foreignTable="pac_catalog_option" phpName="Option" refPhpName="ProductOption">
            <reference local="fk_catalog_option" foreign="id_catalog_option" />
        </foreign-key>
    </table>

</database>
