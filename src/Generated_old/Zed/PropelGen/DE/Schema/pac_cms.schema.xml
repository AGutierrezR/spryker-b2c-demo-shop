<?xml version="1.0"?>
<database name="zed"
          package="vendor/spryker/zed-package/src/ProjectA/Zed/Cms/Persistence/Propel"
          defaultPhpNamingMethod="underscore"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://xsd.propelorm.org/1.6/database.xsd">

    <table name="pac_cms_page" idMethod="native" phpName="PacCmsPage">
        <column name="id_cms_page" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_cms_template" required="false" type="INTEGER"/>
        <column name="fk_cms_layout" required="true" type="INTEGER"/>
        <column name="name" required="true" size="255" type="VARCHAR"/>
        <column name="url" required="true" size="255" type="VARCHAR"/>
        <column name="status" required="true" type="ENUM" valueSet="Active,Disabled,In progress" default="In progress"/>
        <column name="hash" required="true" size="32" type="VARCHAR"/>
        <column name="is_deleted" type="BOOLEAN" default="false"/>

        <behavior name="timestampable"/>

        <foreign-key foreignTable="pac_cms_template" phpName="PacCmsTemplate" refPhpName="PacCmsPage">
            <reference foreign="id_cms_template" local="fk_cms_template"/>
        </foreign-key>

        <foreign-key foreignTable="pac_cms_layout" phpName="PacCmsLayout" refPhpName="PacCmsPage">
            <reference foreign="id_cms_layout" local="fk_cms_layout"/>
        </foreign-key>
    </table>

    <table name="pac_cms_layout" idMethod="native" phpName="PacCmsLayout">
        <column name="id_cms_layout" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" type="VARCHAR"/>
        <column name="description" required="true" type="VARCHAR"/>

        <behavior name="timestampable"/>
    </table>

    <table name="pac_cms_template" idMethod="native" phpName="PacCmsTemplate">
        <column name="id_cms_template" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" type="VARCHAR"/>
        <column name="template_type" type="ENUM" valueSet="file,row,column" default="row"/>
        <column name="is_deleted" type="BOOLEAN" default="false"/>

        <behavior name="timestampable"/>
    </table>

    <table name="pac_cms_partial" idMethod="native" phpName="PacCmsPartial">
        <column name="id_cms_partial" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_cms_block_type" required="true" type="INTEGER"/>
        <column name="yves_partial_name" type="VARCHAR"/>
        <column name="name" required="true" type="VARCHAR"/>
        <column name="content" required="false" type="LONGVARCHAR" sqlType="LONGTEXT"/>
        <column name="description" required="true" type="VARCHAR"/>
        <column name="is_deleted" type="BOOLEAN" default="false"/>

        <behavior name="timestampable"/>

        <foreign-key foreignTable="pac_cms_block_type" phpName="PacCmsBlockType" refPhpName="PacCmsPartial">
            <reference foreign="id_cms_block_type" local="fk_cms_block_type"/>
        </foreign-key>
    </table>

    <table name="pac_cms_template_partial" idMethod="native" phpName="PacCmsTemplatePartial">
        <column name="id_cms_template_partial" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_cms_template" required="true" type="INTEGER"/>
        <column name="fk_cms_partial" required="true" type="INTEGER"/>
        <column name="row" type="INTEGER"/>
        <column name="column" type="INTEGER"/>
        <column name="position" type="INTEGER"/>

        <foreign-key foreignTable="pac_cms_template" phpName="PacCmsTemplate" refPhpName="PacCmsTemplatePartial">
            <reference foreign="id_cms_template" local="fk_cms_template"/>
        </foreign-key>

        <foreign-key foreignTable="pac_cms_partial" phpName="PacCmsPartial" refPhpName="PacCmsTemplatePartial">
                <reference foreign="id_cms_partial" local="fk_cms_partial"/>
        </foreign-key>
    </table>

    <table name="pac_cms_page_block" idMethod="native" phpName="PacCmsPageBlock">
        <column name="id_cms_page_block" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>

        <column name="fk_cms_page" required="true" type="INTEGER"/>
        <column name="fk_cms_block" required="true" type="INTEGER"/>
        <column name="fk_cms_template_partial" required="true" type="INTEGER"/>
        <column name="is_deleted" type="BOOLEAN" default="false"/>

        <foreign-key foreignTable="pac_cms_page" phpName="PacCmsPage" refPhpName="PacCmsPageBlock">
            <reference foreign="id_cms_page" local="fk_cms_page"/>
        </foreign-key>

        <foreign-key foreignTable="pac_cms_block" phpName="PacCmsBlock" refPhpName="PacCmsPageBlockBlock">
            <reference foreign="id_cms_block" local="fk_cms_block"/>
        </foreign-key>

        <foreign-key foreignTable="pac_cms_template_partial" phpName="PacCmsTemplatePartial" refPhpName="PacCmsPageBlock">
            <reference foreign="id_cms_template_partial" local="fk_cms_template_partial"/>
        </foreign-key>

    </table>

    <table name="pac_cms_block" idMethod="native" phpName="PacCmsBlock">
        <column name="id_cms_block" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_cms_block_type" required="true" type="INTEGER"/>
        <column name="title" required="true" type="VARCHAR"/>
        <column name="is_deleted" type="BOOLEAN" default="false"/>

        <foreign-key foreignTable="pac_cms_block_type" phpName="PacCmsBlockType" refPhpName="PacCmsBlock">
            <reference foreign="id_cms_block_type" local="fk_cms_block_type"/>
        </foreign-key>
    </table>

    <table name="pac_cms_block_type" idMethod="native" phpName="PacCmsBlockType">
        <column name="id_cms_block_type" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" type="VARCHAR"/>
    </table>

    <table name="pac_cms_block_text" idMethod="native" phpName="PacCmsBlockText">
        <column name="id_cms_block_text" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_cms_block" type="INTEGER" required="true" />
        <column name="content" type="LONGVARCHAR" sqlType="LONGTEXT"/>
        <column name="is_deleted" type="BOOLEAN" default="false"/>

        <foreign-key foreignTable="pac_cms_block" phpName="PacCmsBlock" refPhpName="PacCmsBlockText">
            <reference foreign="id_cms_block" local="fk_cms_block"/>
        </foreign-key>

        <unique>
            <unique-column name="fk_cms_block" />
        </unique>
    </table>

    <table name="pac_cms_block_product" idMethod="native" phpName="PacCmsBlockProduct">
        <column name="id_cms_block_product" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_cms_block" type="INTEGER" required="true" />
        <column name="fk_catalog_product" type="INTEGER" />
        <column name="is_deleted" type="BOOLEAN" default="false"/>

        <foreign-key foreignTable="pac_cms_block" phpName="PacCmsBlock" refPhpName="PacCmsBlockProduct">
            <reference foreign="id_cms_block" local="fk_cms_block"/>
        </foreign-key>

        <foreign-key foreignTable="pac_catalog_product" phpName="PacCatalogProduct" refPhpName="PacCmsBlockProduct">
            <reference foreign="id_catalog_product" local="fk_catalog_product"/>
        </foreign-key>

        <unique>
            <unique-column name="fk_cms_block" />
        </unique>
    </table>

    <table name="pac_cms_block_glossary" idMethod="native" phpName="PacCmsBlockGlossary">
        <column name="id_cms_block_glossary" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_cms_block" type="INTEGER" required="true"/>
        <column name="fk_glossary_key" type="INTEGER" />
        <column name="is_deleted" type="BOOLEAN" default="false"/>

        <foreign-key foreignTable="pac_cms_block" phpName="PacCmsBlock" refPhpName="PacCmsBlockGlossary">
            <reference foreign="id_cms_block" local="fk_cms_block"/>
        </foreign-key>

        <foreign-key foreignTable="pac_glossary_key" phpName="PacGlossaryKey" refPhpName="PacCmsBlockGlossary">
            <reference foreign="id_glossary_key" local="fk_glossary_key"/>
        </foreign-key>

        <unique>
            <unique-column name="fk_cms_block" />
        </unique>
    </table>

    <table name="pac_cms_page_attribute" idMethod="native" phpName="PacCmsPageAttribute">
        <column name="id_cms_page_attribute" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" type="VARCHAR"/>
        <column name="type" required="true" type="VARCHAR" size="25"/>
        <column name="is_meta_attribute" type="BOOLEAN" default="false"/>

        <behavior name="timestampable"/>
    </table>

    <table name="pac_cms_page_attribute_value" idMethod="native" phpName="PacCmsPageAttributeValue">
        <column name="id_cms_page_attribute_value" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_cms_page_attribute" required="true" type="INTEGER"/>
        <column name="fk_cms_page" required="true" type="INTEGER"/>
        <column name="value" required="true" type="LONGVARCHAR" sqlType="LONGTEXT" />

        <behavior name="timestampable"/>

        <foreign-key foreignTable="pac_cms_page" phpName="PacCmsPage" refPhpName="PacCmsPageAttributeValue">
            <reference foreign="id_cms_page" local="fk_cms_page"/>
        </foreign-key>

        <foreign-key foreignTable="pac_cms_page_attribute" phpName="PacCmsPageAttribute" refPhpName="PacCmsPageAttributeValue">
            <reference foreign="id_cms_page_attribute" local="fk_cms_page_attribute"/>
        </foreign-key>
    </table>

    <table name="pac_cms_redirection" idMethod="native" phpName="PacCmsRedirection">
        <column name="id_cms_redirection" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="url_source" required="true" size="255" type="VARCHAR"/>
        <column name="url_target" required="true" size="255" type="VARCHAR"/>
        <column name="type" required="true" type="ENUM" valueSet="302,301" default="302"/>
        <column name="status" required="true" type="ENUM" valueSet="Active,Disabled" default="Active"/>
        <column name="description" required="false" type="VARCHAR"/>
        <column name="is_deleted" type="BOOLEAN" default="false"/>
        <behavior name="timestampable"/>
    </table>
</database>
