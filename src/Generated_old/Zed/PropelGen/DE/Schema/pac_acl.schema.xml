<?xml version="1.0"?>
<database name="zed"
          defaultIdMethod="native"
          defaultPhpNamingMethod="underscore"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://xsd.propelorm.org/1.6/database.xsd">

    <table name="pac_acl_role" idMethod="native" package="vendor/spryker/zed-package/src/ProjectA/Zed/Acl/Persistence/Propel"
           phpName="PacAclRole">
        <column name="id_acl_role" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" size="255" type="VARCHAR"/>
        <column name="is_deletable" type="BOOLEAN" required="true" default="true"/>
        <column name="is_admin" type="BOOLEAN" required="true" default="false"/>
        <column name="is_deleted" type="BOOLEAN" required="true" default="false"/>
        <unique>
            <unique-column name="name"/>
        </unique>
        <validator column="name">
            <rule name="unique" message="This role already exists!"/>
        </validator>
        <behavior name="timestampable"/>
    </table>

    <table name="pac_acl_user" idMethod="native" package="vendor/spryker/zed-package/src/ProjectA/Zed/Acl/Persistence/Propel"
           phpName="PacAclUser">
        <column name="id_acl_user" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_acl_role" required="true" type="INTEGER"/>
        <column name="firstname" required="true" size="255" type="VARCHAR"/>
        <column name="lastname" required="true" size="255" type="VARCHAR"/>
        <column name="email" required="true" size="255" type="VARCHAR"/>
        <column name="username" required="true" size="255" type="VARCHAR"/>
        <column name="password" required="true" size="255" type="VARCHAR"/>
        <column name="restore_password_key" required="false" size="255" type="VARCHAR"/>
        <column name="last_login" type="TIMESTAMP" required="false"/>
        <column name="failed_logins" required="false" type="INTEGER"/>
        <column name="is_deleted" type="BOOLEAN" required="true" default="false"/>
        <column name="is_default" type="BOOLEAN" required="true" default="false"/>
        <column name="is_new" type="BOOLEAN" required="true" default="false"/>
        <unique>
            <unique-column name="username"/>
        </unique>
        <validator column="username">
            <rule name="unique" message="This username already exists!"/>
        </validator>
        <unique>
            <unique-column name="email"/>
        </unique>
        <validator column="email">
            <rule name="unique" message="This email address already exists!"/>
        </validator>
        <behavior name="timestampable"/>
        <foreign-key foreignTable="pac_acl_role" phpName="AclRole" refPhpName="AclUser">
            <reference foreign="id_acl_role" local="fk_acl_role"/>
        </foreign-key>
    </table>

    <table name="pac_acl_resource" idMethod="native"
           package="vendor/spryker/zed-package/src/ProjectA/Zed/Acl/Persistence/Propel" phpName="PacAclResource">
        <column name="id_acl_resource" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="pattern" required="true" size="255" type="VARCHAR"/>
        <column name="fk_acl_group" required="true" type="INTEGER"/>
        <column name="black_list" required="true" type="BOOLEAN" default="false"/>
        <column name="is_deleted" type="BOOLEAN" required="true" default="false"/>
        <behavior name="timestampable"/>
        <foreign-key foreignTable="pac_acl_group" phpName="AclGroup" refPhpName="AclResource">
            <reference foreign="id_acl_group" local="fk_acl_group"/>
        </foreign-key>
    </table>

    <table name="pac_acl_group_privilege" idMethod="native"
           package="vendor/spryker/zed-package/src/ProjectA/Zed/Acl/Persistence/Propel" phpName="PacAclGroupPrivilege">
        <column name="id_acl_group_privilege" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="fk_acl_role" required="true" type="INTEGER"/>
        <column name="fk_acl_group" required="true" type="INTEGER"/>
        <column name="is_deleted" type="BOOLEAN" required="true" default="false"/>

        <foreign-key foreignTable="pac_acl_role" phpName="AclRole" refPhpName="AclGroupPrivilege">
            <reference foreign="id_acl_role" local="fk_acl_role"/>
        </foreign-key>
        <foreign-key foreignTable="pac_acl_group" phpName="AclGroup" refPhpName="AclGroupPrivilege">
            <reference foreign="id_acl_group" local="fk_acl_group"/>
        </foreign-key>
    </table>

    <table name="pac_acl_group" idMethod="native"
           package="vendor/spryker/zed-package/src/ProjectA/Zed/Acl/Persistence/Propel" phpName="PacAclGroup">
        <column name="id_acl_group" required="true" type="INTEGER" autoIncrement="true" primaryKey="true"/>
        <column name="name" required="true" size="255" type="VARCHAR"/>
        <column name="is_deleted" type="BOOLEAN" required="true" default="false"/>
        <behavior name="timestampable"/>
    </table>

</database>
