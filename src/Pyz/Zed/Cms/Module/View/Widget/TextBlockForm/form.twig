<script>
var addSubmitHandler = function(){
    var form = $('#cms-page-text-block-form');
    form.submit(function (e) {
        var data = new FormData();
        $.ajax({
            url: form.attr('action'),
            data: form.serialize(),
            processData: false,
            type: 'POST',
            success: function (data) {
                if (!data.success) {
                    var form = data.form;
                    $('#form-widget-container').html(form).addClass('validation-error');
                } else {
                    $('#form-widget-container').removeClass('validation-error');
                    $('#modal').modal('hide');
                }
            }
        });
        e.preventDefault();
    });
};
$(document).ready(function(){
    addSubmitHandler();
});
</script>
{{ modal('Text block', form) }}
