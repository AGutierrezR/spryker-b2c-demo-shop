{% extends "@application/layout/layout.twig" %}

{% block breadcrumbItems %}
    <li><a href="/">{{ 'global.home' | trans }}</a></li>
{% endblock %}

{% block title %}
    <h3>{{ 'wishlist.title' | trans }}</h3>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="small-12 columns">
            <div class="callout">
                <ul class="no-bullet">
                    {% if wishlistOverview.items|length %}
                        <table>
                            <tbody>
                                {% for item in wishlistOverview.items %}
                                    {% if item.product is defined %}
                                    <tr>
                                        {% set imageUrl = '' %}
                                        {% if item.product.imageSets is defined and item.product.imageSets.default is defined %}
                                            {% set imageUrl = item.product.imageSets.default[0].externalUrlSmall %}
                                        {% endif %}
                                        <td><img width="75" src="{{ imageUrl }}" /></td>
                                        <td>{{ item.product.sku }}</td>
                                        <td>{{ item.product.name }}</td>
                                        <td>{{ item.product.price | price }}</td>
                                        <td>
                                            {% for attribute in item.product.superAttributes %}
                                                {% if item.product.attributes[attribute] is defined %}
                                                    {{ attribute | trans }}: {{ item.product.attributes[attribute] }} <br/>
                                                {% endif %}
                                            {% endfor %}
                                        </td>
                                        <td>
                                            <form class="row align-bottom" method="POST" action="{{ path('wishlist/move-to-cart', {'product-id': item.product.id, sku: item.product.sku}) }}">
                                                <div class="small-12 columns">
                                                    <button type="submit" class="button success">
                                                        <i class="fa fa-move"></i>{{ 'customer.account.wishlist.add-to-cart' | trans }}
                                                    </button>
                                                </div>
                                            </form>
                                            <form class="row align-bottom" method="POST" action="{{ path('wishlist/remove-item', {'product-id': item.product.id}) }}">
                                                <div class="small-12 columns">
                                                    <button type="submit" class="button warning">
                                                        <i class="fa fa-minus"></i>{{ 'customer.account.wishlist.remove' | trans }}
                                                    </button>
                                                </div>
                                            </form>
                                            <form class="row align-bottom" method="GET" action="{{ item.product.url }}">
                                                <div class="small-12 columns">
                                                    <button type="submit" class="button info">
                                                        <i class="fa fa-view"></i>{{ 'customer.account.wishlist.view-in-shop' | trans }}
                                                    </button>
                                                </div>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endif %}
                                {% endfor %}
                            </tbody>
                        </table>

                        <div class="row align-center">
                            {% include '@Application/layout/partials/pagination.twig' with {
                            parameters: {},
                            currentPage: currentPage,
                            paginationPath: 'wishlist/browse',
                            maxPage: totalPages,
                            showAlwaysFirstAndLast: true
                            } %}
                        </div>
                    {% else %}
                        <li>Your wishlist is empty.</li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
