{% extends molecule('card') %}

{% define config = {
    name: 'product-card',
    tag: 'article'
} %}

{% define data = {
    name: required,
    abstractId: required,
    url: required,
    imageUrl: required,
    price: required,
    originalPrice: null
} %}

{% block body %}

    <div href="{{data.url}}" class="{{config.name}}__container">
        <div class="{{ config.name }}__thumbnail">
            <a href="{{data.url}}" title="{{data.name}}">
                {% block image %}
                    <div class="{{ config.name }}__overlay">
                        {% include atom('thumbnail') with {
                            attributes: {
                                alt: data.name,
                                src: data.imageUrl,
                                title: data.name
                            }
                        } only %}
                    </div>
                {% endblock %}
                {% block labels %}
                    {{ widget('ProductAbstractLabelWidgetPlugin', data.abstractId) }}
                {% endblock %}
            </a>
        </div>

        {% block content %}

            <div class="{{ config.name }}__info">
                <div class="grid grid--justify grid--top grid--no-wrap">
                    {% block name %}
                        <div class="col col--md-8 col--sm-12">
                            <a href="{{data.url}}" title="{{data.name}}" class="{{ config.name }}__name">{{data.name}}</a>
                        </div>
                    {% endblock %}

                    {% block price %}
                        <div class="col col--md-4 col--sm-12">
                            {% include molecule('price') with {
                                data: {
                                    amount: data.price | money,
                                    originalAmount: data.originalPrice is empty ? null : (data.originalPrice | money)
                                }
                            } only %}
                        </div>
                    {% endblock %}
                </div>
                {% block rating %}
                    {{ widget('ProductAbstractReviewWidgetPlugin', data.abstractId) }}
                {% endblock %}
            </div>
        {% endblock %}
    </div>

{% endblock %}


