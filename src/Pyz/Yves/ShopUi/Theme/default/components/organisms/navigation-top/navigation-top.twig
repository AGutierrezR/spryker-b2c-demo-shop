{% extends model('component') %}

{% define config = {
    name: 'navigation-top',
    tag: 'nav'
} %}

{% define data = {
    cartQuantity: app['cart.quantity'] | default,
    showUserMenu: not (hideUserMenu | default(false))
} %}

{% set cartQuantity = data.cartQuantity > 0 ? data.cartQuantity ~ ' ' : '' %}

{% block body %}
    <ul class="grid grid--middle grid--right">
        {% if data.showUserMenu %}
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                <li class="{{ config.name }}__item">
                    <a href="{{ url('wishlist/overview') }}" class="{{ config.name }}__link">
                        {% include atom('icon') with {
                            modifiers: ['big'],
                            data: {
                                name: 'wishlist'
                            }
                        } only %}
                    </a>
                </li>
                <li class="{{ config.name }}__item">
                    <a href="{{ url('customer/overview') }}" class="{{ config.name }}__link js-overlay-open">
                        {% include atom('icon') with {
                            modifiers: ['big'],
                            data: {
                                name: 'user-account'
                            }
                        } only %}
                    </a>
                </li>
            {% else %}
                <li class="{{ config.name }}__item">
                    <a href="{{ url('login') }}" class="{{ config.name }}__link">
                        {% include atom('icon') with {
                            modifiers: ['big'],
                            data: {
                                name: 'wishlist'
                            }
                        } only %}
                    </a>
                </li>
                <li class="{{ config.name }}__item">
                    <a href="{{ url('login') }}" class="{{ config.name }}__link js-overlay-open">
                        {% include atom('icon') with {
                            modifiers: ['big'],
                            data: {
                                name: 'user-account'
                            }
                        } only %}
                    </a>
                </li>
            {% endif %}
        {% endif %}

        <li class="{{ config.name }}__item">
            <a href="{{ url('cart') }}" class="{{ config.name }}__link js-overlay-open">
                {% if cartQuantity > 0 %}
                    <span class="cart-link__quantity">{{cartQuantity}}</span>
                {% endif %}

                {% include atom('icon') with {
                    modifiers: ['big'],
                    data: {
                        name: 'cart'
                    }
                } only %}
            </a>
        </li>

        <li class="{{ config.name }}__item {{ config.name }}__item--overlay">
            {% include molecule('nav-overlay') with {
                attributes: {
                    'trigger-open': '.js-overlay-open',
                    'active-link': config.name ~ '__link--active'
                }
            } only %}
        </li>
    </ul>
{% endblock %}
