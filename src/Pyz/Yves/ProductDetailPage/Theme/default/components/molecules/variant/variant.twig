{% extends model('component') %}

{% define config = {
    name: 'variant',
    tag: 'div'
} %}

{% define data = {
    name: required,
    formName: required,
    values: required,
    selectedValue: null,
    label: '',
    isAvailable: true
} %}

{%- block class -%}variant-wrapper pdp-option{%- endblock -%}

{% block body %}
    <div class="pdp-option__title">{{data.label}}</div>
    <div class="pdp-option__wrapper">
        {% if data.selectedValue is null %}
            {% if data.isAvailable %}
                {% embed atom('select') with {
                    modifiers: ['expand'],
                    attributes: {
                        name: data.formName
                    },
                    embed: {
                        values: data.values
                    }
                } only %}
                    {% block selectClass -%}
                        {{ parent() }} {{ config.jsName }}-variant-trigger
                    {%- endblock %}
                    {% block options %}
                        <option>{{ 'product.attribute._none' | trans }}</option>
                        {% for value in embed.values %}
                            <option value="{{value}}">{{value}}</option>
                        {% endfor %}
                    {% endblock %}
                {% endembed %}
                {% include molecule('form-submitter') with {
                    attributes: {
                        'trigger-selector': '.js-select-variant-trigger'
                    }
                } only %}
            {% else %}
                {{ 'product.attribute.not_available' | trans }}
            {% endif %}
        {% else %}
            {{data.selectedValue}}
            <a href="?" class="pdp-option__reset">
                {% include atom('icon') with {
                    data: {
                        name: 'close'
                    }
                } only %}
            </a>
            <input type="hidden" name="{{data.formName}}" value="{{data.selectedValue}}" />
        {% endif %}
    </div>
{% endblock %}
